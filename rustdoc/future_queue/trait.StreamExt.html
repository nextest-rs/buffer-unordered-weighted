<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An extension trait for `Stream`s that provides `future_queue`."><meta name="keywords" content="rust, rustlang, rust-lang, StreamExt"><title>StreamExt in future_queue - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../future_queue/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../future_queue/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">StreamExt</a></h2><div class="sidebar-elems"><section><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.future_queue">future_queue</a></li><li><a href="#method.future_queue_grouped">future_queue_grouped</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In future_queue</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="index.html">future_queue</a>::<wbr><a class="trait" href="#">StreamExt</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/future_queue/lib.rs.html#170-239">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait StreamExt: <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a> {
    fn <a href="#method.future_queue" class="fnname">future_queue</a>&lt;Fut&gt;(self, max_weight: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="struct.FutureQueue.html" title="struct future_queue::FutureQueue">FutureQueue</a>&lt;Self&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a>&lt;Item = (<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>, Fut)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a></span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.future_queue_grouped" class="fnname">future_queue_grouped</a>&lt;Fut, I, K, Q&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_global_weight: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groups: I<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="struct.FutureQueueGrouped.html" title="struct future_queue::FutureQueueGrouped">FutureQueueGrouped</a>&lt;Self, K&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = (K, <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;Q&gt; + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a>&lt;Item = (<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>, <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Q&gt;, Fut)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a></span>,
    { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An extension trait for <code>Stream</code>s that provides
<a href="trait.StreamExt.html#method.future_queue"><code>future_queue</code></a>.</p>
</div></details><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.future_queue" class="method has-srclink"><a class="srclink rightside" href="../src/future_queue/lib.rs.html#192-198">source</a><h4 class="code-header">fn <a href="#method.future_queue" class="fnname">future_queue</a>&lt;Fut&gt;(self, max_weight: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="struct.FutureQueue.html" title="struct future_queue::FutureQueue">FutureQueue</a>&lt;Self&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a>&lt;Item = (<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>, Fut)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,</span></h4></section></summary><div class="docblock"><p>An adaptor for creating a queue of pending futures (unordered), where each future has a
different weight.</p>
<p>This stream must return values of type <code>(usize, impl Future)</code>, where the <code>usize</code> indicates
the weight of each future. This adaptor will buffer futures up to weight <code>max_weight</code>, and
then return the outputs in the order in which they complete.</p>
<p>The weight may be exceeded if the last future to be queued has a weight greater than
<code>max_weight</code> minus the total weight of currently executing futures. However, no further
futures will be queued until the total weights of running futures falls below <code>max_weight</code>.</p>
<p>The adaptor will schedule futures in the order they’re returned by the stream, without doing
any reordering based on weight.</p>
<p>The weight of a future can be zero, in which case it will not count towards the total weight.</p>
<p>The returned stream will be a stream of each future’s output.</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<p>See <a href="index.html#examples">the crate documentation</a> for an example.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.future_queue_grouped" class="method has-srclink"><a class="srclink rightside" href="../src/future_queue/lib.rs.html#225-238">source</a><h4 class="code-header">fn <a href="#method.future_queue_grouped" class="fnname">future_queue_grouped</a>&lt;Fut, I, K, Q&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;max_global_weight: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;groups: I<br>) -&gt; <a class="struct" href="struct.FutureQueueGrouped.html" title="struct future_queue::FutureQueueGrouped">FutureQueueGrouped</a>&lt;Self, K&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = (K, <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;Q&gt; + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Q: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a>&lt;Item = (<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.usize.html">usize</a>, <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Q&gt;, Fut)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.66.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,</span></h4></section></summary><div class="docblock"><p>An adaptor for creating a queue of pending futures, where each future has a different weight
and optional group.</p>
<p>This method accepts a maximum global weight, as well as a set of <em>groups</em> of type <code>K</code>. Each
group has a defined maximum weight. This stream must return values of type <code>(usize, Option&lt;Q&gt;, impl Future)</code>, where <code>K</code> is <code>Borrow&lt;Q&gt;</code>.</p>
<p>This adapter will buffer futures up to weight <code>max_weight</code>. If the optional group is
specified for a future, it will also check that the weight of futures in that group does not
exceed the specified limit. Any futures that exceed the group’s weight limit will be queued
up, but not scheduled until the weight of futures in that group falls below the limit.</p>
<p>The adaptor is as fair as possible under the given constraints: it will schedule futures in
the order they’re returned by the stream, without doing any reordering based on weight. When
a future from a group completes, queued up futures in this group will be preferentially
scheduled before any other futures from the provided stream.</p>
<p>The weight of a future can be zero, in which case it will not count towards the total weight.</p>
<p>The returned stream will be a stream of each future’s output.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>The stream panics if the optional group provided by a stream element isn’t in the set of
known groups.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"><section id="impl-StreamExt-for-T" class="impl has-srclink"><a class="srclink rightside" href="../src/future_queue/lib.rs.html#166">source</a><a href="#impl-StreamExt-for-T" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;?<a class="trait" href="https://doc.rust-lang.org/1.66.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="trait.StreamExt.html" title="trait future_queue::StreamExt">StreamExt</a> for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../futures_core/stream/trait.Stream.html" title="trait futures_core::stream::Stream">Stream</a>,</span></h3></section></div><script src="../implementors/future_queue/trait.StreamExt.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="future_queue" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0 (69f9c33d7 2022-12-12)" ></div></body></html>